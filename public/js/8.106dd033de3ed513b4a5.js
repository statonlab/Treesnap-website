webpackJsonp([8],{"0dG/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=c(a("U7vG")),s=c(a("7610")),l=c(a("R3sX")),o=c(a("y1vT"));function c(e){return e&&e.__esModule?e:{default:e}}var u=["fullscreenchange","msfullscreenchange","mozfullscreenchange","webkitfullscreenchange"],m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e));return a.state={currentIndex:e.startIndex,thumbsTranslate:0,offsetPercentage:0,galleryWidth:0,thumbnailsWrapperWidth:0,thumbnailsWrapperHeight:0,isFullscreen:!1,isPlaying:!1},e.lazyLoad&&(a._lazyLoaded=[]),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){this.props.disableArrowKeys!==e.disableArrowKeys&&(e.disableArrowKeys?window.removeEventListener("keydown",this._handleKeyDown):window.addEventListener("keydown",this._handleKeyDown)),!e.lazyLoad||this.props.lazyLoad&&this.props.items===e.items||(this._lazyLoaded=[]),this.state.currentIndex>=e.items.length&&this.slideToIndex(0)}},{key:"componentDidUpdate",value:function(e,t){e.thumbnailPosition===this.props.thumbnailPosition&&e.showThumbnails===this.props.showThumbnails&&t.thumbnailsWrapperHeight===this.state.thumbnailsWrapperHeight&&t.thumbnailsWrapperWidth===this.state.thumbnailsWrapperWidth||this._handleResize(),t.currentIndex!==this.state.currentIndex&&(this.props.onSlide&&this.props.onSlide(this.state.currentIndex),this._updateThumbnailTranslate(t)),e.slideDuration!==this.props.slideDuration&&(this.slideToIndex=(0,l.default)(this._unthrottledSlideToIndex,this.props.slideDuration,{trailing:!1}))}},{key:"componentWillMount",value:function(){this._unthrottledSlideToIndex=this.slideToIndex.bind(this),this.slideToIndex=(0,l.default)(this._unthrottledSlideToIndex,this.props.slideDuration,{trailing:!1}),this._handleResize=this._handleResize.bind(this),this._debounceResize=(0,o.default)(this._handleResize,500),this._handleScreenChange=this._handleScreenChange.bind(this),this._handleKeyDown=this._handleKeyDown.bind(this),this._thumbnailDelay=300}},{key:"componentDidMount",value:function(){this._handleResize(),this.props.autoPlay&&this.play(),this.props.disableArrowKeys||window.addEventListener("keydown",this._handleKeyDown),window.addEventListener("resize",this._debounceResize),this._onScreenChangeEvent()}},{key:"componentWillUnmount",value:function(){this.props.disableArrowKeys||window.removeEventListener("keydown",this._handleKeyDown),this._debounceResize&&window.removeEventListener("resize",this._debounceResize),this._offScreenChangeEvent(),this._intervalId&&(window.clearInterval(this._intervalId),this._intervalId=null),this._resizeTimer&&window.clearTimeout(this._resizeTimer)}},{key:"play",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]||arguments[0];if(!this._intervalId){var a=this.props,n=a.slideInterval,r=a.slideDuration;this.setState({isPlaying:!0}),this._intervalId=window.setInterval(function(){e.state.hovering||(e.props.infinite||e._canSlideRight()?e.slideToIndex(e.state.currentIndex+1):e.pause())},Math.max(n,r)),this.props.onPlay&&t&&this.props.onPlay(this.state.currentIndex)}}},{key:"pause",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];this._intervalId&&(window.clearInterval(this._intervalId),this._intervalId=null,this.setState({isPlaying:!1}),this.props.onPause&&e&&this.props.onPause(this.state.currentIndex))}},{key:"setModalFullscreen",value:function(e){this.setState({modalFullscreen:e}),this.props.onScreenChange&&this.props.onScreenChange(e)}},{key:"fullScreen",value:function(){var e=this._imageGallery;this.props.useBrowserFullscreen?e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():this.setModalFullscreen(!0):this.setModalFullscreen(!0),this.setState({isFullscreen:!0})}},{key:"exitFullScreen",value:function(){this.state.isFullscreen&&(this.props.useBrowserFullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this.setModalFullscreen(!1):this.setModalFullscreen(!1),this.setState({isFullscreen:!1}))}},{key:"slideToIndex",value:function(e,t){var a=this.state.currentIndex;t&&this._intervalId&&(this.pause(!1),this.play(!1));var n=this.props.items.length-1,r=e;e<0?r=n:e>n&&(r=0),this.setState({previousIndex:a,currentIndex:r,offsetPercentage:0,style:{transition:"all "+this.props.slideDuration+"ms ease-out"}})}},{key:"getCurrentIndex",value:function(){return this.state.currentIndex}},{key:"_handleScreenChange",value:function(){var e=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;this.props.onScreenChange&&this.props.onScreenChange(e),this.setState({isFullscreen:!!e})}},{key:"_onScreenChangeEvent",value:function(){var e=this;u.map(function(t){document.addEventListener(t,e._handleScreenChange)})}},{key:"_offScreenChangeEvent",value:function(){var e=this;u.map(function(t){document.removeEventListener(t,e._handleScreenChange)})}},{key:"_toggleFullScreen",value:function(){this.state.isFullscreen?this.exitFullScreen():this.fullScreen()}},{key:"_togglePlay",value:function(){this._intervalId?this.pause():this.play()}},{key:"_handleResize",value:function(){var e=this;this._resizeTimer=window.setTimeout(function(){e._imageGallery&&e.setState({galleryWidth:e._imageGallery.offsetWidth}),e._setThumbsTranslate(-e._getThumbsTranslate(e.state.currentIndex>0?1:0)*e.state.currentIndex),e._imageGallerySlideWrapper&&e.setState({gallerySlideWrapperHeight:e._imageGallerySlideWrapper.offsetHeight}),e._thumbnailsWrapper&&(e._isThumbnailHorizontal()?e.setState({thumbnailsWrapperHeight:e._thumbnailsWrapper.offsetHeight}):e.setState({thumbnailsWrapperWidth:e._thumbnailsWrapper.offsetWidth}))},500)}},{key:"_isThumbnailHorizontal",value:function(){var e=this.props.thumbnailPosition;return"left"===e||"right"===e}},{key:"_handleKeyDown",value:function(e){switch(parseInt(e.keyCode||e.which||0)){case 37:this._canSlideLeft()&&!this._intervalId&&this._slideLeft();break;case 39:this._canSlideRight()&&!this._intervalId&&this._slideRight()}}},{key:"_handleMouseOverThumbnails",value:function(e){var t=this;this.props.slideOnThumbnailHover&&(this.setState({hovering:!0}),this._thumbnailTimer&&(window.clearTimeout(this._thumbnailTimer),this._thumbnailTimer=null),this._thumbnailTimer=window.setTimeout(function(){t.slideToIndex(e)},this._thumbnailDelay))}},{key:"_handleMouseLeaveThumbnails",value:function(){this._thumbnailTimer&&(window.clearTimeout(this._thumbnailTimer),this._thumbnailTimer=null,!0===this.props.autoPlay&&this.play(!1)),this.setState({hovering:!1})}},{key:"_handleImageError",value:function(e){this.props.defaultImage&&-1===e.target.src.indexOf(this.props.defaultImage)&&(e.target.src=this.props.defaultImage)}},{key:"_handleOnSwiped",value:function(e,t,a,n){this.setState({isFlick:n})}},{key:"_shouldSlideOnSwipe",value:function(){var e=Math.abs(this.state.offsetPercentage)>30||this.state.isFlick;return e&&this.setState({isFlick:!1}),e}},{key:"_handleOnSwipedTo",value:function(e){var t=this.state.currentIndex;this._shouldSlideOnSwipe()&&(t+=e),e<0?this._canSlideLeft()||(t=this.state.currentIndex):this._canSlideRight()||(t=this.state.currentIndex),this._unthrottledSlideToIndex(t)}},{key:"_handleSwiping",value:function(e,t,a){var n=this.props.swipingTransitionDuration,r=e*(a/this.state.galleryWidth*100);Math.abs(r)>=100&&(r=100*e);var i={transition:"transform "+n+"ms ease-out"};this.setState({offsetPercentage:r,style:i})}},{key:"_canNavigate",value:function(){return this.props.items.length>=2}},{key:"_canSlideLeft",value:function(){return this.props.infinite||this.state.currentIndex>0}},{key:"_canSlideRight",value:function(){return this.props.infinite||this.state.currentIndex<this.props.items.length-1}},{key:"_updateThumbnailTranslate",value:function(e){if(0===this.state.currentIndex)this._setThumbsTranslate(0);else{var t=Math.abs(e.currentIndex-this.state.currentIndex),a=this._getThumbsTranslate(t);a>0&&(e.currentIndex<this.state.currentIndex?this._setThumbsTranslate(this.state.thumbsTranslate-a):e.currentIndex>this.state.currentIndex&&this._setThumbsTranslate(this.state.thumbsTranslate+a))}}},{key:"_setThumbsTranslate",value:function(e){this.setState({thumbsTranslate:e})}},{key:"_getThumbsTranslate",value:function(e){if(this.props.disableThumbnailScroll)return 0;var t=this.state,a=t.thumbnailsWrapperWidth,n=t.thumbnailsWrapperHeight,r=void 0;if(this._thumbnails){if(this._isThumbnailHorizontal()){if(this._thumbnails.scrollHeight<=n)return 0;r=this._thumbnails.scrollHeight-n}else{if(this._thumbnails.scrollWidth<=a)return 0;r=this._thumbnails.scrollWidth-a}return e*(r/(this._thumbnails.children.length-1))}}},{key:"_getAlignmentClassName",value:function(e){var t=this.state.currentIndex,a="";switch(e){case t-1:a=" left";break;case t:a=" center";break;case t+1:a=" right"}return this.props.items.length>=3&&this.props.infinite&&(0===e&&t===this.props.items.length-1?a=" right":e===this.props.items.length-1&&0===t&&(a=" left")),a}},{key:"_getTranslateXForTwoSlide",value:function(e){var t=this.state,a=t.currentIndex,n=t.offsetPercentage,r=t.previousIndex,i=-100*a+100*e+n;return n>0?this.direction="left":n<0&&(this.direction="right"),0===a&&1===e&&n>0?i=-100+n:1===a&&0===e&&n<0&&(i=100+n),a!==r?0===r&&0===e&&0===n&&"left"===this.direction?i=100:1===r&&1===e&&0===n&&"right"===this.direction&&(i=-100):0===a&&1===e&&0===n&&"left"===this.direction?i=-100:1===a&&0===e&&0===n&&"right"===this.direction&&(i=100),i}},{key:"_getThumbnailBarHeight",value:function(){return this._isThumbnailHorizontal()?{height:this.state.gallerySlideWrapperHeight}:{}}},{key:"_getSlideStyle",value:function(e){var t=this.state,a=t.currentIndex,n=t.offsetPercentage,r=this.props,i=r.infinite,s=r.items,l=-100*a,o=s.length-1,c=l+100*e+n,u=1;e===a?u=3:e===this.state.previousIndex?u=2:0!==e&&e!==o||(u=0),i&&s.length>2&&(0===a&&e===o?c=-100+n:a===o&&0===e&&(c=100+n)),i&&2===s.length&&(c=this._getTranslateXForTwoSlide(e));var m="translate("+c+"%, 0)";return{WebkitTransform:m,MozTransform:m,msTransform:m,OTransform:m,transform:m,zIndex:u}}},{key:"_getThumbnailStyle",value:function(){var e=void 0;return{WebkitTransform:e=this._isThumbnailHorizontal()?"translate(0, "+this.state.thumbsTranslate+"px)":"translate("+this.state.thumbsTranslate+"px, 0)",MozTransform:e,msTransform:e,OTransform:e,transform:e}}},{key:"_slideLeft",value:function(e){this.slideToIndex(this.state.currentIndex-1,e)}},{key:"_slideRight",value:function(e){this.slideToIndex(this.state.currentIndex+1,e)}},{key:"_renderItem",value:function(e){var t=this.props.onImageError||this._handleImageError;return i.default.createElement("div",{className:"image-gallery-image"},i.default.createElement("img",{src:e.original,alt:e.originalAlt,srcSet:e.srcSet,sizes:e.sizes,onLoad:this.props.onImageLoad,onError:t.bind(this)}),e.description&&i.default.createElement("span",{className:"image-gallery-description"},e.description))}},{key:"_renderThumbInner",value:function(e){var t=this._handleImageError;return this.props.onThumbnailError&&(t=this.props.onThumbnailError),i.default.createElement("div",null,i.default.createElement("img",{src:e.thumbnail,alt:e.thumbnailAlt,onError:t.bind(this)}),i.default.createElement("div",{className:"image-gallery-thumbnail-label"},e.thumbnailLabel))}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentIndex,r=t.isFullscreen,l=t.modalFullscreen,o=t.isPlaying,c=this._getThumbnailStyle(),u=this.props.thumbnailPosition,m=this._slideLeft.bind(this),h=this._slideRight.bind(this),d=[],p=[],f=[];this.props.items.map(function(t,r){var s=e._getAlignmentClassName(r),l=t.originalClass?" "+t.originalClass:"",o=t.thumbnailClass?" "+t.thumbnailClass:"",c=t.renderItem||e.props.renderItem||e._renderItem.bind(e),u=t.renderThumbInner||e.props.renderThumbInner||e._renderThumbInner.bind(e),m=!e.props.lazyLoad||s||e._lazyLoaded[r];m&&e.props.lazyLoad&&(e._lazyLoaded[r]=!0);var h=i.default.createElement("div",{key:r,className:"image-gallery-slide"+s+l,style:n(e._getSlideStyle(r),e.state.style),onClick:e.props.onClick},m?c(t):i.default.createElement("div",{style:{height:"100%"}}));d.push(h),e.props.showThumbnails&&p.push(i.default.createElement("a",{onMouseOver:e._handleMouseOverThumbnails.bind(e,r),onMouseLeave:e._handleMouseLeaveThumbnails.bind(e,r),key:r,role:"button","aria-pressed":a===r?"true":"false","aria-label":"Go to Slide "+(r+1),className:"image-gallery-thumbnail"+(a===r?" active":"")+o,onClick:function(t){return e.slideToIndex.call(e,r,t)}},u(t))),e.props.showBullets&&f.push(i.default.createElement("button",{key:r,type:"button",className:"image-gallery-bullet "+(a===r?"active":""),onClick:function(t){return e.slideToIndex.call(e,r,t)},"aria-pressed":a===r?"true":"false","aria-label":"Go to Slide "+(r+1)}))});var v=i.default.createElement("div",{ref:function(t){return e._imageGallerySlideWrapper=t},className:"image-gallery-slide-wrapper "+u},this.props.renderCustomControls&&this.props.renderCustomControls(),this.props.showFullscreenButton&&this.props.renderFullscreenButton(this._toggleFullScreen.bind(this),r),this.props.showPlayButton&&this.props.renderPlayPauseButton(this._togglePlay.bind(this),o),this._canNavigate()?[this.props.showNav&&i.default.createElement("span",{key:"navigation"},this.props.renderLeftNav(m,!this._canSlideLeft()),this.props.renderRightNav(h,!this._canSlideRight())),this.props.disableSwipe?i.default.createElement("div",{className:"image-gallery-slides",key:"slides"},d):i.default.createElement(s.default,{className:"image-gallery-swipe",key:"swipeable",delta:1,onSwipingLeft:this._handleSwiping.bind(this,-1),onSwipingRight:this._handleSwiping.bind(this,1),onSwiped:this._handleOnSwiped.bind(this),onSwipedLeft:this._handleOnSwipedTo.bind(this,1),onSwipedRight:this._handleOnSwipedTo.bind(this,-1),onSwipedDown:this._handleOnSwipedTo.bind(this,0),onSwipedUp:this._handleOnSwipedTo.bind(this,0)},i.default.createElement("div",{className:"image-gallery-slides"},d))]:i.default.createElement("div",{className:"image-gallery-slides"},d),this.props.showBullets&&i.default.createElement("div",{className:"image-gallery-bullets"},i.default.createElement("ul",{className:"image-gallery-bullets-container",role:"navigation","aria-label":"Bullet Navigation"},f)),this.props.showIndex&&i.default.createElement("div",{className:"image-gallery-index"},i.default.createElement("span",{className:"image-gallery-index-current"},this.state.currentIndex+1),i.default.createElement("span",{className:"image-gallery-index-separator"},this.props.indexSeparator),i.default.createElement("span",{className:"image-gallery-index-total"},this.props.items.length)));return i.default.createElement("section",{ref:function(t){return e._imageGallery=t},className:"image-gallery"+(l?" fullscreen-modal":""),"aria-live":"polite"},i.default.createElement("div",{className:"image-gallery-content"+(r?" fullscreen":"")},("bottom"===u||"right"===u)&&v,this.props.showThumbnails&&i.default.createElement("div",{className:"image-gallery-thumbnails-wrapper "+u,style:this._getThumbnailBarHeight()},i.default.createElement("div",{className:"image-gallery-thumbnails",ref:function(t){return e._thumbnailsWrapper=t}},i.default.createElement("div",{ref:function(t){return e._thumbnails=t},className:"image-gallery-thumbnails-container",style:c,role:"navigation","aria-label":"Thumbnail Navigation"},p))),("top"===u||"left"===u)&&v))}}]),t}();m.propTypes={items:i.default.PropTypes.array.isRequired,showNav:i.default.PropTypes.bool,autoPlay:i.default.PropTypes.bool,lazyLoad:i.default.PropTypes.bool,infinite:i.default.PropTypes.bool,showIndex:i.default.PropTypes.bool,showBullets:i.default.PropTypes.bool,showThumbnails:i.default.PropTypes.bool,showPlayButton:i.default.PropTypes.bool,showFullscreenButton:i.default.PropTypes.bool,slideOnThumbnailHover:i.default.PropTypes.bool,disableThumbnailScroll:i.default.PropTypes.bool,disableArrowKeys:i.default.PropTypes.bool,disableSwipe:i.default.PropTypes.bool,useBrowserFullscreen:i.default.PropTypes.bool,defaultImage:i.default.PropTypes.string,indexSeparator:i.default.PropTypes.string,thumbnailPosition:i.default.PropTypes.string,startIndex:i.default.PropTypes.number,slideDuration:i.default.PropTypes.number,slideInterval:i.default.PropTypes.number,swipingTransitionDuration:i.default.PropTypes.number,onSlide:i.default.PropTypes.func,onScreenChange:i.default.PropTypes.func,onPause:i.default.PropTypes.func,onPlay:i.default.PropTypes.func,onClick:i.default.PropTypes.func,onImageLoad:i.default.PropTypes.func,onImageError:i.default.PropTypes.func,onThumbnailError:i.default.PropTypes.func,renderCustomControls:i.default.PropTypes.func,renderLeftNav:i.default.PropTypes.func,renderRightNav:i.default.PropTypes.func,renderPlayPauseButton:i.default.PropTypes.func,renderFullscreenButton:i.default.PropTypes.func,renderItem:i.default.PropTypes.func},m.defaultProps={items:[],showNav:!0,autoPlay:!1,lazyLoad:!1,infinite:!0,showIndex:!1,showBullets:!1,showThumbnails:!0,showPlayButton:!0,showFullscreenButton:!0,slideOnThumbnailHover:!1,disableThumbnailScroll:!1,disableArrowKeys:!1,disableSwipe:!1,useBrowserFullscreen:!0,indexSeparator:" / ",thumbnailPosition:"bottom",startIndex:0,slideDuration:450,swipingTransitionDuration:0,slideInterval:3e3,renderLeftNav:function(e,t){return i.default.createElement("button",{type:"button",className:"image-gallery-left-nav",disabled:t,onClick:e,"aria-label":"Previous Slide"})},renderRightNav:function(e,t){return i.default.createElement("button",{type:"button",className:"image-gallery-right-nav",disabled:t,onClick:e,"aria-label":"Next Slide"})},renderPlayPauseButton:function(e,t){return i.default.createElement("button",{type:"button",className:"image-gallery-play-button"+(t?" active":""),onClick:e,"aria-label":"Play or Pause Slideshow"})},renderFullscreenButton:function(e,t){return i.default.createElement("button",{type:"button",className:"image-gallery-fullscreen-button"+(t?" active":""),onClick:e,"aria-label":"Open Fullscreen"})}},t.default=m},"5L7H":function(e,t,a){"use strict";var n=a("U7vG"),r=a.n(n),i=a("KSGD"),s=a.n(i),l=a("saAw"),o=a("OE/d"),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loading:!1,collection_id:0,label:"",errors:{label:[],collection_id:[]}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),c(t,[{key:"submit",value:function(e){var t=this;if(e.preventDefault(),this.validate()){this.setState({loading:!0});var a=parseInt(this.state.collection_id);axios.post("/web/collection/attach",{observation_id:this.props.observationId,collection_id:0!==a?a:"",label:this.state.label}).then(function(e){t.setState({label:"",collection_id:0,errors:{label:[],collection_id:[]},loading:!1}),t.props.onSubmit(e.data.data)}).catch(function(e){var a=e.response;if(a&&422===a.status){var n=a.data;t.setState({errors:{label:n.label||[],collection_id:n.collection_id||[]},loading:!1})}else console.log(e)})}}},{key:"validate",value:function(){var e=this.state.label,t=this.state.collection_id;return""!==e.trim()||0!==t||(this.setState({errors:{label:["Please select an existing collection or type a new collection label."],collection_id:[]}}),!1)}},{key:"render",value:function(){var e=this;return o.a.authenticated()?r.a.createElement("form",{action:"#",method:"POST",onSubmit:this.submit.bind(this)},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Collection Name"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select"+(this.state.errors.collection_id.length>0?" is-danger":"")},r.a.createElement("select",{value:this.state.collection_id,onChange:function(t){var a=t.target;return e.setState({collection_id:a.value})}},r.a.createElement("option",{value:"0"},"[Select Collection]"),this.props.collections.map(function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}))),this.state.errors.collection_id.map(function(e,t){return r.a.createElement("p",{className:"help is-danger",key:t},e)}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Or Create New Collection"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",className:"input"+(this.state.errors.label.length>0?" is-danger":""),onChange:function(t){var a=t.target;return e.setState({label:a.value})},value:this.state.label,placeholder:"Type new collection label",readOnly:0!==parseInt(this.state.collection_id),disabled:0!==parseInt(this.state.collection_id)}),this.state.errors.label.map(function(e,t){return r.a.createElement("p",{className:"help is-danger",key:t},e)})),r.a.createElement("p",{className:"help"},"The selected observation will be automatically added to the newly created collection.")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-primary"},"Add Observation"))),r.a.createElement(l.a,{visible:this.state.loading})):r.a.createElement("div",{className:"content"},r.a.createElement("p",null,"You must be logged in to add this observation to a collection."),r.a.createElement("p",null,"Please ",r.a.createElement("a",{href:"/login"},"login")," or ",r.a.createElement("a",{href:"/register"},"create an account")," first."))}}]),t}();t.a=u,u.PropTypes={observationId:s.a.number.isRequired,collections:s.a.array,onSubmit:s.a.func},u.defaultProps={collections:[],onSubmit:function(){}}},"5zKI":function(e,t,a){"use strict";var n=a("U7vG"),r=a.n(n),i=a("O27J"),s=a.n(i),l=a("KSGD"),o=a.n(l),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={show:!1,hiding:!1,marginTop:window.scrollY>70?-40:0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),c(t,[{key:"componentWillMount",value:function(){var e=this;this.timer=setTimeout(function(){e.hide()},5e3)}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({show:!0})},100),window.addEventListener("scroll",this.handleWindowScroll.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleWindowScroll.bind(this))}},{key:"handleWindowScroll",value:function(){var e=window.scrollY>70?-40:0;this.setState({marginTop:e})}},{key:"hide",value:function(){this.setState({hiding:!0}),clearTimeout(this.timer)}},{key:"render",value:function(){var e="";switch(this.props.type){case"success":case"danger":case"info":case"warning":e="is-"+this.props.type;break;default:e="is-success"}e+=this.state.show?" show":"",e+=this.state.hiding?" hiding":"";var t=this.state.marginTop;return r.a.createElement("div",{className:"notification push-notification "+e,style:{marginTop:t+"px"}},r.a.createElement("button",{type:"button",className:"delete",onClick:this.hide.bind(this)}),this.props.message)}}],[{key:"_remove",value:function(){this.stack&&this.stack.length>0&&document.body.removeChild(this.stack.shift())}},{key:"push",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=document.createElement("div");s.a.render(r.a.createElement(t,{message:e,type:a,container:n}),n),document.body.appendChild(n),this.stack.length>0&&this._remove(),this.stack.push(n)}}]),t}();t.a=u,u.PropTypes={message:o.a.string.isRequired,type:o.a.string,container:o.a.object.isRequired},u.defaultProps={type:"success"},u.stack=[]},7610:function(e,t,a){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a("U7vG");var i=r.createClass({displayName:"Swipeable",propTypes:{onSwiped:r.PropTypes.func,onSwiping:r.PropTypes.func,onSwipingUp:r.PropTypes.func,onSwipingRight:r.PropTypes.func,onSwipingDown:r.PropTypes.func,onSwipingLeft:r.PropTypes.func,onSwipedUp:r.PropTypes.func,onSwipedRight:r.PropTypes.func,onSwipedDown:r.PropTypes.func,onSwipedLeft:r.PropTypes.func,onTap:r.PropTypes.func,flickThreshold:r.PropTypes.number,delta:r.PropTypes.number,preventDefaultTouchmoveEvent:r.PropTypes.bool,stopPropagation:r.PropTypes.bool,nodeName:r.PropTypes.string,trackMouse:r.PropTypes.bool,children:r.PropTypes.node},getDefaultProps:function(){return{flickThreshold:.6,delta:10,preventDefaultTouchmoveEvent:!0,stopPropagation:!1,nodeName:"div"}},componentWillMount:function(){this.swipeable={x:null,y:null,swiping:!1,start:0}},calculatePos:function(e){var t=void 0,a=void 0;e.changedTouches?(t=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY):(t=e.clientX,a=e.clientY);var n=this.swipeable.x-t,r=this.swipeable.y-a,i=Math.abs(n),s=Math.abs(r),l=Date.now()-this.swipeable.start;return{deltaX:n,deltaY:r,absX:i,absY:s,velocity:Math.sqrt(i*i+s*s)/l}},eventStart:function(e){if("function"==typeof this.props.onMouseDown&&this.props.onMouseDown(e),("mousedown"!==e.type||this.props.trackMouse)&&!(e.touches&&e.touches.length>1)){var t=e.touches;t||(t=[{clientX:e.clientX,clientY:e.clientY}]),this.props.stopPropagation&&e.stopPropagation(),this.swipeable={start:Date.now(),x:t[0].clientX,y:t[0].clientY,swiping:!1}}},eventMove:function(e){if("function"==typeof this.props.onMouseMove&&this.props.onMouseMove(e),("mousemove"!==e.type||this.props.trackMouse)&&this.swipeable.x&&this.swipeable.y&&!(e.touches&&e.touches.length>1)){var t=!1,a=this.calculatePos(e);a.absX<this.props.delta&&a.absY<this.props.delta||(this.props.stopPropagation&&e.stopPropagation(),this.props.onSwiping&&this.props.onSwiping(e,a.deltaX,a.deltaY,a.absX,a.absY,a.velocity),a.absX>a.absY?a.deltaX>0?(this.props.onSwipingLeft||this.props.onSwipedLeft)&&(this.props.onSwipingLeft&&this.props.onSwipingLeft(e,a.absX),t=!0):(this.props.onSwipingRight||this.props.onSwipedRight)&&(this.props.onSwipingRight&&this.props.onSwipingRight(e,a.absX),t=!0):a.deltaY>0?(this.props.onSwipingUp||this.props.onSwipedUp)&&(this.props.onSwipingUp&&this.props.onSwipingUp(e,a.absY),t=!0):(this.props.onSwipingDown||this.props.onSwipedDown)&&(this.props.onSwipingDown&&this.props.onSwipingDown(e,a.absY),t=!0),this.swipeable.swiping=!0,t&&this.props.preventDefaultTouchmoveEvent&&e.preventDefault())}},eventEnd:function(e){if("function"==typeof this.props.onMouseUp&&this.props.onMouseUp(e),"mouseup"!==e.type||this.props.trackMouse){if(this.swipeable.swiping){var t=this.calculatePos(e);this.props.stopPropagation&&e.stopPropagation();var a=t.velocity>this.props.flickThreshold;this.props.onSwiped&&this.props.onSwiped(e,t.deltaX,t.deltaY,a,t.velocity),t.absX>t.absY?t.deltaX>0?this.props.onSwipedLeft&&this.props.onSwipedLeft(e,t.deltaX,a):this.props.onSwipedRight&&this.props.onSwipedRight(e,t.deltaX,a):t.deltaY>0?this.props.onSwipedUp&&this.props.onSwipedUp(e,t.deltaY,a):this.props.onSwipedDown&&this.props.onSwipedDown(e,t.deltaY,a)}else this.props.onTap&&this.props.onTap(e);this.swipeable={x:null,y:null,swiping:!1,start:0}}},render:function(){var e=n({},this.props,{onTouchStart:this.eventStart,onTouchMove:this.eventMove,onTouchEnd:this.eventEnd,onMouseDown:this.eventStart,onMouseMove:this.eventMove,onMouseUp:this.eventEnd});return delete e.onSwiped,delete e.onSwiping,delete e.onSwipingUp,delete e.onSwipingRight,delete e.onSwipingDown,delete e.onSwipingLeft,delete e.onSwipedUp,delete e.onSwipedRight,delete e.onSwipedDown,delete e.onSwipedLeft,delete e.onTap,delete e.flickThreshold,delete e.delta,delete e.preventDefaultTouchmoveEvent,delete e.stopPropagation,delete e.nodeName,delete e.children,delete e.trackMouse,r.createElement(this.props.nodeName,e,this.props.children)}});e.exports=i},C6vg:function(e,t,a){"use strict";var n=a("U7vG"),r=a.n(n),i=a("KSGD"),s=a.n(i),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected:[]},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),l(t,[{key:"componentWillMount",value:function(){this.props.selectedByDefault&&this.setState({selected:this.props.list})}},{key:"componentWillReceiveProps",value:function(e){e.list!==this.props.list&&this.props.selectedByDefault&&this.setState({selected:e.list})}},{key:"reset",value:function(){this.setState({selected:[]})}},{key:"_setActiveSelected",value:function(e){return this.state.selected.indexOf(e)>-1?" is-selected":""}},{key:"_toggleSelected",value:function(e){var t=[];t=this.state.selected.indexOf(e)>-1?this.state.selected.filter(function(t){return t!==e}):this.state.selected.concat(e),this.setState({selected:t}),this.props.onChange(t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"control buttons-group"},this.props.list.map(function(t,a){return r.a.createElement("button",{type:"button",className:"button mb-0 button-select"+e._setActiveSelected(t),key:a,onClick:function(){return e._toggleSelected(t)}},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fa fa-check"})),r.a.createElement("span",null,t))}))}},{key:"setSelected",value:function(e){this.setState({selected:e})}}]),t}(),c=o;o.PropTypes={list:s.a.array.isRequired,onChange:s.a.func.isRequired,selectedByDefault:s.a.bool},o.defaultProps={selectedByDefault:!1};var u=a("mOuh"),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={burrs:[],catkins:[],chestnutBlight:[],crownHealth:[],diameterNumericMin:"",diameterNumericMax:"",heightNumericMin:"",heightNumericMax:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),m(t,[{key:"_update",value:function(e,t){this.setState(h({},e,t)),this.props.onChange(Object.assign({},this.state,h({},e,t)))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-multiline"},r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Nuts/Burrs"),r.a.createElement(c,{list:["None","Few","Many","Unknown"],onChange:function(t){return e._update("burrs",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Catkins"),r.a.createElement(c,{list:["Present","Absent","Unknown"],onChange:function(t){return e._update("catkins",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Chestnut Blight"),r.a.createElement(c,{list:["Cankers and cracked bark","Tan to orange-colored patches or pustules on bark","Evidence of old dead trunk","Stump sprouting"],onChange:function(t){return e._update("chestnutBlight",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Crown Health"),r.a.createElement(c,{list:["1 - Healthy","2 - Thinning","3 - Some dead branches (less than 50%)","4 - Many dead branches (more than 50%)","5 - Completely dead","I'm not sure"],onChange:function(t){return e._update("crownHealth",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tree Diameter (",u.a.unit("inches"),")"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Min.",value:this.state.diameterNumericMin,onChange:function(t){var a=t.target;return e._update("diameterNumericMin",a.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Max.",value:this.state.diameterNumericMax,onChange:function(t){var a=t.target;return e._update("diameterNumericMax",a.value)}}))))))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tree Height (",u.a.unit("feet"),")"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Min.",value:this.state.heightNumericMin,onChange:function(t){var a=t.target;return e._update("heightNumericMin",a.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Max.",value:this.state.heightNumericMax,onChange:function(t){var a=t.target;return e._update("heightNumericMax",a.value)}}))))))))}}]),t}(),p=d;d.PropTypes={onChange:s.a.func.isRequired};var f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={species:[],locationCharacteristics:[],seedsBinary:[],flowersBinary:[],emeraldAshBorer:[],nearbyTrees:[],crownHealth:[],diameterNumericMin:"",diameterNumericMax:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),f(t,[{key:"_update",value:function(e,t){this.setState(v({},e,t)),this.props.onChange(Object.assign({},this.state,v({},e,t)))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-multiline"},r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Ash Species"),r.a.createElement(c,{list:["White Ash","Green Ash","Blue Ash","Black Ash","Uncertain"],onChange:function(t){return e._update("species",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Habitat"),r.a.createElement(c,{list:["Forest","Wetland","Field","Roadside, urban, suburban, or park"],onChange:function(t){return e._update("locationCharacteristics",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Seeds Present"),r.a.createElement(c,{list:["Yes","No"],onChange:function(t){return e._update("seedsBinary",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Flowers Present"),r.a.createElement(c,{list:["Yes","No"],onChange:function(t){return e._update("flowersBinary",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Ash Borer"),r.a.createElement(c,{list:["D-shaped adult exit holes","Bark coming off with tunneling underneath","Emerald ash borer beetles/larvae","Stump sprouting"],onChange:function(t){return e._update("emeraldAshBorer",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Trees Nearby"),r.a.createElement(c,{list:["Dead and/or dying","Healthy and large","Healthy and small","No trees of this species nearby","Not sure"],onChange:function(t){return e._update("nearbyTrees",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Crown Health"),r.a.createElement(c,{list:["1 - Healthy","2 - Thinning","3 - Some dead branches (less than 50%)","4 - Many dead branches (more than 50%)","5 - Completely dead","I'm not sure"],onChange:function(t){return e._update("crownHealth",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tree Diameter (",u.a.unit("inches"),")"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Min.",value:this.state.diameterNumericMin,onChange:function(t){var a=t.target;return e._update("diameterNumericMin",a.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Max.",value:this.state.diameterNumericMax,onChange:function(t){var a=t.target;return e._update("diameterNumericMax",a.value)}}))))))))}}]),t}(),y=b;b.PropTypes={onChange:s.a.func.isRequired};var g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={woollyAdesCoverage:[],cones:[],crownClassification:[],locationCharacteristics:[],nearbyTrees:[],crownHealth:[],hemlockSpecies:[],diameterNumericMin:"",diameterNumericMax:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),g(t,[{key:"_update",value:function(e,t){this.setState(E({},e,t)),this.props.onChange(Object.assign({},this.state,E({},e,t)))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-multiline"},r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Species"),r.a.createElement(c,{list:["Eastern hemlock (Tsuga canadensis)","Carolina hemlock (Tsuga caroliniana)","Other hemlock species","I'm not sure"],onChange:function(t){return e._update("hemlockSpecies",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Woolly Adelgids"),r.a.createElement(c,{list:["0%","1-24%","25-49%","50-74%","75-100%"],onChange:function(t){return e._update("woollyAdesCoverage",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Cones"),r.a.createElement(c,{list:["Yes","No"],onChange:function(t){return e._update("cones",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Crown Classification"),r.a.createElement(c,{list:["Dominant. This tree's crown extends above others in the area.","Codominant. This tree's crown is level with or slightly below other nearby trees.","Overtopped. This tree's crown is entirely below other trees nearby.","Not applicable (Tree is isolated)","I'm not sure."],onChange:function(t){return e._update("crownClassification",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Crown Health"),r.a.createElement(c,{list:["1 - Healthy","2 - Thinning","3 - Some dead branches (less than 50%)","4 - Many dead branches (more than 50%)","5 - Completely dead","I'm not sure"],onChange:function(t){return e._update("crownHealth",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Habitat"),r.a.createElement(c,{list:["Forest","Wetland","Field","Roadside, urban, suburban, or park"],onChange:function(t){return e._update("locationCharacteristics",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Trees Nearby"),r.a.createElement(c,{list:["Dead and/or dying","Healthy and large","Healthy and small","No trees of this species nearby","Not sure"],onChange:function(t){return e._update("nearbyTrees",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tree Diameter (",u.a.unit("inches"),")"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Min.",value:this.state.diameterNumericMin,onChange:function(t){var a=t.target;return e._update("diameterNumericMin",a.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Max.",value:this.state.diameterNumericMax,onChange:function(t){var a=t.target;return e._update("diameterNumericMax",a.value)}}))))))))}}]),t}(),N=w;w.PropTypes={onChange:s.a.func.isRequired};var k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var C=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={diameterNumericMin:"",diameterNumericMax:"",crownHealth:[],locationCharacteristics:[],nearbyTrees:[],seedsBinary:[],flowersBinary:[]},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),k(t,[{key:"_update",value:function(e,t){this.setState(S({},e,t)),this.props.onChange(Object.assign({},this.state,S({},e,t)))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-multiline"},r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Crown Health"),r.a.createElement(c,{list:["1 - Healthy","2 - Thinning","3 - Some dead branches (less than 50%)","4 - Many dead branches (more than 50%)","5 - Completely dead","I'm not sure"],onChange:function(t){return e._update("crownHealth",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Habitat"),r.a.createElement(c,{list:["Forest","Wetland","Field","Roadside, urban, suburban, or park"],onChange:function(t){return e._update("locationCharacteristics",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Trees Nearby"),r.a.createElement(c,{list:["Dead and/or dying","Healthy and large","Healthy and small","No trees of this species nearby","Not sure"],onChange:function(t){return e._update("nearbyTrees",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tree Diameter (",u.a.unit("inches"),")"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Min.",value:this.state.diameterNumericMin,onChange:function(t){var a=t.target;return e._update("diameterNumericMin",a.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Max.",value:this.state.diameterNumericMax,onChange:function(t){var a=t.target;return e._update("diameterNumericMax",a.value)}}))))))))}}]),t}(),T=C;C.PropTypes={onChange:s.a.func.isRequired};var O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={acorns:[],heightFirstBranchMin:"",heightFirstBranchMax:"",oakHealthProblems:[],crownHealth:[],diameterNumericMin:"",diameterNumericMax:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),O(t,[{key:"_update",value:function(e,t){this.setState(P({},e,t)),this.props.onChange(Object.assign({},this.state,P({},e,t)))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-multiline"},r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Crown Health"),r.a.createElement(c,{list:["1 - Healthy","2 - Thinning","3 - Some dead branches (less than 50%)","4 - Many dead branches (more than 50%)","5 - Completely dead","I'm not sure"],onChange:function(t){return e._update("crownHealth",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Health Problems"),r.a.createElement(c,{list:["Dieback in canopy","Defoliation","Cankers","Bark damage","Signs of rot at base","Other"],onChange:function(t){return e._update("oakHealthProblems",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Acorns"),r.a.createElement(c,{list:["None","Some","Lots","I'm not sure"],onChange:function(t){return e._update("acorns",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Height of First Branch (",u.a.unit("feet"),")"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Min.",value:this.state.heightFirstBranchMin,onChange:function(t){var a=t.target;return e._update("heightFirstBranchMin",a.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Max.",value:this.state.heightFirstBranchMax,onChange:function(t){var a=t.target;return e._update("heightFirstBranchMax",a.value)}}))))))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tree Diameter (",u.a.unit("inches"),")"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Min.",value:this.state.diameterNumericMin,onChange:function(t){var a=t.target;return e._update("diameterNumericMin",a.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Max.",value:this.state.diameterNumericMax,onChange:function(t){var a=t.target;return e._update("diameterNumericMax",a.value)}}))))))))}}]),t}(),F=x;x.PropTypes={onChange:s.a.func.isRequired};var j=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var I=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={heightNumericMin:"",heightNumericMax:"",diameterNumericMin:"",diameterNumericMax:"",numberRootSproutsMin:"",numberRootSproutsMax:"",seedsBinary:[],conesMaleFemale:[],deerRub:[],torreyaFungalBlight:[]},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),j(t,[{key:"_update",value:function(e,t){this.setState(M({},e,t)),this.props.onChange(Object.assign({},this.state,M({},e,t)))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-multiline"},r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Seeds"),r.a.createElement(c,{list:["Yes","No","I'm not sure"],onChange:function(t){return e._update("seedsBinary",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Deer Rub"),r.a.createElement(c,{list:["Present","Absent","Not sure"],onChange:function(t){return e._update("deerRub",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Cones"),r.a.createElement(c,{list:["Absent","Male present","Female present","Not sure"],onChange:function(t){return e._update("conesMaleFemale",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Fungal Blight"),r.a.createElement(c,{list:["Present","Absent","Not sure"],onChange:function(t){return e._update("torreyaFungalBlight",t)}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tree Diameter (",u.a.unit("inches"),")"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Min.",value:this.state.diameterNumericMin,onChange:function(t){var a=t.target;return e._update("diameterNumericMin",a.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Max.",value:this.state.diameterNumericMax,onChange:function(t){var a=t.target;return e._update("diameterNumericMax",a.value)}}))))))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tree Height (",u.a.unit("feet"),")"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Min.",value:this.state.heightNumericMin,onChange:function(t){var a=t.target;return e._update("heightNumericMin",a.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Max.",value:this.state.heightNumericMax,onChange:function(t){var a=t.target;return e._update("heightNumericMax",a.value)}}))))))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Number of Root Sprouts"),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Min.",value:this.state.numberRootSproutsMin,onChange:function(t){var a=t.target;return e._update("numberRootSproutsMin",a.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",placeholder:"Max.",value:this.state.numberRootSproutsMax,onChange:function(t){var a=t.target;return e._update("numberRootSproutsMax",a.value)}}))))))))}}]),t}(),R=I;I.PropTypes={onChange:s.a.func.isRequired};var D=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var B=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={otherLabel:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),D(t,[{key:"_update",value:function(e,t){this.setState(L({},e,t)),this.props.onChange(Object.assign({},this.state,L({},e,t)))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-multiline"},r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Tree Species"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{value:this.state.otherLabel,className:"input",onChange:function(t){return e._update("otherLabel",t)},placeholder:"E.g, Silver Maple"})))))}}]),t}(),A=B;B.PropTypes={onChange:s.a.func.isRequired};var z=a("OE/d"),W=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var U=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={categories:[],selectedCategories:[],city:"",state:"",county:"",filterName:"",americanChestnut:{},ash:{},hemlock:{},americanElm:{},whiteOak:{},floridaTorreya:{},other:{},resultsCount:0,loading:!1,errors:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),W(t,[{key:"_resetForm",value:function(){this.setState({selectedCategories:[],city:"",county:"",state:"",filterName:"",resultsCount:0}),this.refs.speciesButtonList.reset()}},{key:"componentWillMount",value:function(){var e=this;axios.get("/web/observations/categories").then(function(t){e.setState({categories:t.data.data})}).catch(function(e){console.log(e)})}},{key:"close",value:function(){this._resetForm(),this.props.onCloseRequest()}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0});var a={name:this.state.filterName,categories:this.state.selectedCategories,ash:this.state.ash,americanChestnut:this.state.americanChestnut,hemlock:this.state.hemlock,americanElm:this.state.americanElm,whiteOak:this.state.whiteOak,floridaTorreya:this.state.floridaTorreya,other:this.state.other,address:{city:this.state.city,county:this.state.county,state:this.state.state},map:this.props.map},n="/web/filters";this.props.withObservations&&(n+="/observations"),axios.post(n,a).then(function(e){var n=e.data;t.setState({loading:!1,errors:{}}),t.props.onCreate({params:a,data:n.data}),t.props.onStateChange(_.clone(t.state)),t._resetForm()}).catch(function(e){var a=e.response;a&&422===a.status&&(t.setState({errors:a.data}),document.getElementById("filters-card-body").scrollTop=0),t.setState({loading:!1})})}},{key:"count",value:function(e){var t=this,a=Object.keys(e)[0],n=Object.assign({},this.state,H({},a,e[a]));this.setState(H({loading:!0},a,e[a])),axios.post("/web/filter/count",{categories:n.selectedCategories,ash:n.ash,americanChestnut:n.americanChestnut,hemlock:n.hemlock,americanElm:n.americanElm,whiteOak:n.whiteOak,other:n.other,floridaTorreya:n.floridaTorreya,address:{city:n.city,county:n.county,state:n.state}}).then(function(e){t.setState({loading:!1,resultsCount:e.data.data.count})}).catch(function(e){console.log(e.response),t.setState({loading:!1})})}},{key:"renderAmericanChestnutFilters",value:function(){var e=this;return r.a.createElement("div",{className:"column is-12"},r.a.createElement("h3",{className:"title is-4 mb-0"},"American Chestnut Filters (Optional)"),r.a.createElement("div",{className:"bordered"},r.a.createElement(p,{onChange:function(t){return e.count({americanChestnut:t})}})))}},{key:"renderAmericanElmFilters",value:function(){var e=this;return r.a.createElement("div",{className:"column is-12"},r.a.createElement("h3",{className:"title is-4 mb-0"},"American Elm Filters (Optional)"),r.a.createElement("div",{className:"bordered"},r.a.createElement(T,{onChange:function(t){return e.count({americanElm:t})}})))}},{key:"renderWhiteOakFilters",value:function(){var e=this;return r.a.createElement("div",{className:"column is-12"},r.a.createElement("h3",{className:"title is-4 mb-0"},"White Oak Filters (Optional)"),r.a.createElement("div",{className:"bordered"},r.a.createElement(F,{onChange:function(t){return e.count({whiteOak:t})}})))}},{key:"renderAshFilters",value:function(){var e=this;return r.a.createElement("div",{className:"column is-12"},r.a.createElement("h3",{className:"title is-4 mb-0"},"Ash Filters (Optional)"),r.a.createElement("div",{className:"bordered"},r.a.createElement(y,{onChange:function(t){return e.count({ash:t})}})))}},{key:"renderHemlockFilters",value:function(){var e=this;return r.a.createElement("div",{className:"column is-12"},r.a.createElement("h3",{className:"title is-4 mb-0"},"Hemlock Filters (Optional)"),r.a.createElement("div",{className:"bordered"},r.a.createElement(N,{onChange:function(t){return e.count({hemlock:t})}})))}},{key:"renderFloridaTorreyaFilters",value:function(){var e=this;return r.a.createElement("div",{className:"column is-12"},r.a.createElement("h3",{className:"title is-4 mb-0"},"Florida Torreya Filters (Optional)"),r.a.createElement("div",{className:"bordered"},r.a.createElement(R,{onChange:function(t){return e.count({floridaTorreya:t})}})))}},{key:"renderOtherFilters",value:function(){var e=this;return r.a.createElement("div",{className:"column is-12"},r.a.createElement("h3",{className:"title is-4 mb-0"},"Other Trees Filters (Optional)"),r.a.createElement("div",{className:"bordered"},r.a.createElement(A,{onChange:function(t){return e.count({other:t})}})))}},{key:"renderForm",value:function(){var e=this;return r.a.createElement("div",{className:"columns is-multiline"},z.a.authenticated()?r.a.createElement("div",{className:"column is-12"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Filter Name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",className:"input",placeholder:"Optional: label your filter",value:this.state.filterName,onChange:function(t){var a=t.target;return e.setState({filterName:a.value})}})),r.a.createElement("p",{className:"help"},"You can save your filter settings to easily reapply later or share with others."))):null,r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Species"),r.a.createElement("p",{className:"mb-1"},"Begin by selecting the species you are interested in."),r.a.createElement(c,{ref:"speciesButtonList",list:this.state.categories,onChange:function(t){return e.count({selectedCategories:t})}}))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"columns mb-none"},r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field mb-none"},r.a.createElement("label",{className:"label"},"City"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",className:"input",placeholder:"E.g, Knoxville",value:this.state.city,onChange:function(t){var a=t.target;return e.count({city:a.value})}})))),r.a.createElement("div",{className:"column is-6"},r.a.createElement("div",{className:"field mb-none"},r.a.createElement("label",{className:"label"},"County"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",className:"input",placeholder:"E.g, Knox County",value:this.state.county,onChange:function(t){var a=t.target;return e.count({county:a.value})}}))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"State"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"text",className:"input",placeholder:"E.g, Tennessee",value:this.state.state,onChange:function(t){var a=t.target;return e.count({state:a.value})}})))),this.state.selectedCategories.map(function(t,a){var n="render"+t.replace(" ","")+"Filters";return"function"==typeof e[n]?r.a.createElement("div",{style:{width:"100%"},key:a},e[n]()):null}),r.a.createElement("div",{className:"column is-6"}),z.a.authenticated()?r.a.createElement("div",{className:"column is-12"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"label checkbox"},r.a.createElement("input",{type:"checkbox",className:"mr-0",defaultChecked:!1}),"Notify me via email if new observations fitting this criteria get submitted"),r.a.createElement("p",{className:"help mr-1"},"Maximum of 3 emails per week.")))):null)}},{key:"renderErrors",value:function(){var e=Object.keys(this.state.errors);if(0!==e.length){var t=this.state.errors;return r.a.createElement("div",{className:"alert is-danger"},e.map(function(e){return t[e].map(function(e,t){return r.a.createElement("p",{key:t},e)})}))}}},{key:"render",value:function(){return this.props.visible?r.a.createElement("div",{className:"modal is-active"},r.a.createElement("div",{className:"modal-background",onClick:this.close.bind(this)}),r.a.createElement("div",{className:"modal-card modal-card-lg"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},"Advanced Filters"),r.a.createElement("button",{type:"button",className:"delete",onClick:this.close.bind(this)})),r.a.createElement("section",{className:"modal-card-body",id:"filters-card-body"},this.renderErrors(),this.renderForm()),r.a.createElement("footer",{className:"modal-card-foot flex-space-between"},r.a.createElement("button",{type:"button",className:"button is-success"+(this.state.loading?" is-loading":""),disabled:this.state.loading,onClick:this.submit.bind(this)},"Apply"),this.props.showCount?r.a.createElement("p",null,"Found ",r.a.createElement("b",null,this.state.resultsCount||0)," observations that fit your criteria"):null,r.a.createElement("button",{type:"button",className:"button",onClick:this.close.bind(this)},"Cancel")))):null}},{key:"reapplyState",value:function(e){this.setState(e),e.selectedCategories&&this.refs.speciesButtonList.setSelected(e.selectedCategories)}}]),t}();t.a=U;U.PropTypes={visible:s.a.bool.isRequired,onCloseRequest:s.a.func.isRequired,onCreate:s.a.func.isRequired,map:s.a.bool,withObservations:s.a.bool,onStateChange:s.a.func,showCount:s.a.bool},U.defaultProps={map:!1,withObservations:!0,showCount:!1,onStateChange:function(){}}},Hwqd:function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"_flatten",value:function(e){return e.map(function(e){return parseInt(e.id)})}},{key:"_contains",value:function(e,t){return-1!==e.trim().toLowerCase().indexOf(t.trim())}}]),e}();t.a=r},IFrJ:function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setPath()}return n(e,[{key:"setPath",value:function(){this.path=window.location.pathname,"/"!==this.path&&this.path.replace(/\/$/g,"")}},{key:"isActive",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is-active";return this.setPath(),t&&this.path===e?a:!t&&this.path.indexOf(e)>=0?a:null}},{key:"parseUrl",value:function(e){var t={};return(e=e.substr(1)).split("&").forEach(function(e){if(e){var a=(e=e.split("+").join(" ")).indexOf("="),n=a>-1?e.substr(0,a):e,r=a>-1?decodeURIComponent(e.substr(a+1)):"",i=n.indexOf("[");if(-1===i)t[decodeURIComponent(n)]=r;else{var s=n.indexOf("]",i),l=decodeURIComponent(n.substring(i+1,s));n=decodeURIComponent(n.substring(0,i)),t[n]||(t[n]=[]),l?t[n][l]=r:t[n].push(r)}}}),t}}]),e}();t.a=new r},LvfB:function(e,t,a){var n,r,i;r=[t],void 0===(i="function"==typeof(n=function(e){var t,a,n=window,r=document,i="mousemove",s="mouseup",l="mousedown",o="EventListener",c="add"+o,u="remove"+o,m=[],h=function(e,o){for(e=0;e<m.length;)(o=(o=m[e++]).container||o)[u](l,o.md,0),n[u](s,o.mu,0),n[u](i,o.mm,0);for(m=[].slice.call(r.getElementsByClassName("dragscroll")),e=0;e<m.length;)!function(e,o,u,m,h,d){(d=e.container||e)[c](l,d.md=function(t){e.hasAttribute("nochilddrag")&&r.elementFromPoint(t.pageX,t.pageY)!=d||(m=1,o=t.clientX,u=t.clientY,t.preventDefault())},0),n[c](s,d.mu=function(){m=0},0),n[c](i,d.mm=function(n){m&&((h=e.scroller||e).scrollLeft-=t=-o+(o=n.clientX),h.scrollTop-=a=-u+(u=n.clientY),e==r.body&&((h=r.documentElement).scrollLeft-=t,h.scrollTop-=a))},0)}(m[e++])};"complete"==r.readyState?h():n[c]("load",h,0),e.reset=h})?n.apply(t,r):n)||(e.exports=i)},NdNt:function(e,t,a){"use strict";var n=a("U7vG"),r=a("KSGD"),i=a.n(r),s=a("O27J"),l=a.n(s),o=new google.maps.InfoWindow,c=a("t4LX"),u=a("OE/d"),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.marker="",a.colors={"American Chestnut":"https://maps.google.com/mapfiles/ms/icons/green-dot.png",Ash:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png",Hemlock:"https://maps.google.com/mapfiles/ms/icons/red-dot.png","White Oak":"https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",Other:"https://maps.google.com/mapfiles/ms/icons/purple-dot.png"},a.event=c.a.listen("mapClicked",function(){a.callout&&a.callout.close()}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),m(t,[{key:"componentWillMount",value:function(){this.marker=new google.maps.Marker({title:this.props.title,position:{lat:this.props.position.latitude,lng:this.props.position.longitude},map:this.props.maps}),this.callout=o,this.marker.setVisible(this.props.show),this.marker.addListener("click",this.openCallout.bind(this));var e=void 0;e=this.canSeeLocation()?this.colors[this.marker.title]||"https://maps.google.com/mapfiles/ms/icons/purple-dot.png":"/images/map/q-dot.png",this.marker.setIcon(e),this.props.onCreate(this.marker)}},{key:"canSeeLocation",value:function(){return u.a.can("view accurate location")||u.a.owns(this.props.owner_id)||u.a.inGroupWith(this.props.owner_id)}},{key:"openCallout",value:function(){this.callout.close(),this.callout.setContent(this.renderCallout()),this.callout.open(this.props.map,this.marker),this.props.onClick()}},{key:"componentWillReceiveProps",value:function(e){this.marker.setVisible(e.show)}},{key:"renderCallout",value:function(){var e=document.createElement("div");return l.a.render(this.props.children,e),e}},{key:"render",value:function(){return null}},{key:"componentWillUnmount",value:function(){this.props.onDestroy(this.marker)}}]),t}();t.a=h;h.PropTypes={maps:i.a.object.isRequired,position:i.a.object.isRequired,title:i.a.string,show:i.a.bool,onCreate:i.a.func,onClick:i.a.func,onDestroy:i.a.func,owner_id:i.a.number},h.defaultProps={title:"",show:!0,onCreate:function(){},onClick:function(){},onHide:function(){},owner_id:0}},"OE/d":function(e,t,a){"use strict";var n=a("t4LX"),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t&&(t=JSON.parse(JSON.stringify(window.TreeSnap))),this._role=null!==t.role?t.role.toLowerCase():null,this._isLoggedIn=t.loggedIn,this._isAdmin="admin"===this._role,this._isScientist="scientist"===this._role,this._user=t.user,this._groups=[],this._abilities={member:[],owner:[],admin:[]},this._role&&(this._role=this._role.toLowerCase()),this.initAbilities(),this.loadGroups(),n.a.listen("user.groups.updated",this.loadGroups.bind(this))}return i(e,[{key:"initAbilities",value:function(){this._abilities.user=["create notes","create collections","flag observations"],this._abilities.scientist=["contact users","confirm species","access admin pages","view accurate location"].concat(this._abilities.user),this._abilities.admin=["manage users","delete observations","manage events"].concat(this._abilities.scientist)}},{key:"loadGroups",value:function(){var e=this;this.authenticated()&&axios.get("/web/groups?with_users=1").then(function(t){e._groups=t.data.data.map(function(e){return{id:e.id,users:e.users.map(function(e){return e.id})}})}).catch(function(e){console.log(e)})}},{key:"can",value:function(e){return!(!this.authenticated()||null===this._role)&&this._abilities[this._role].indexOf(e)>-1}},{key:"owns",value:function(e,t){return void 0===t&&(t="user_id"),"object"===(void 0===e?"undefined":r(e))?Array.isArray(e)?e.every(this.owns.bind(this)):void 0!==e[t]&&e[t]===this._user.id:"number"==typeof e&&this._user.id===e}},{key:"inGroupWith",value:function(e){for(var t in this._groups)if(this._groups[t].users.indexOf(e)>-1)return!0;return!1}},{key:"inGroup",value:function(e){for(var t in this._groups)if(this._groups[t].id===e)return!0;return!1}},{key:"authenticated",value:function(){return this._isLoggedIn}},{key:"admin",value:function(){return this._isAdmin}},{key:"scientist",value:function(){return this._isScientist}},{key:"role",value:function(){return this._role}},{key:"user",value:function(){return this._user}}]),e}();t.a=new s},R3sX:function(e,t,a){(function(t){var a="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,h=u||m||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,v=function(){return h.Date.now()};function b(e,t,n){var r,i,s,l,o,c,u=0,m=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError(a);function b(t){var a=r,n=i;return r=i=void 0,u=t,l=e.apply(n,a)}function E(e){var a=e-c;return void 0===c||a>=t||a<0||h&&e-u>=s}function w(){var e=v();if(E(e))return N(e);o=setTimeout(w,function(e){var a=t-(e-c);return h?f(a,s-(e-u)):a}(e))}function N(e){return o=void 0,d&&r?b(e):(r=i=void 0,l)}function _(){var e=v(),a=E(e);if(r=arguments,i=this,c=e,a){if(void 0===o)return function(e){return u=e,o=setTimeout(w,t),m?b(e):l}(c);if(h)return o=setTimeout(w,t),b(c)}return void 0===o&&(o=setTimeout(w,t)),l}return t=g(t)||0,y(n)&&(m=!!n.leading,s=(h="maxWait"in n)?p(g(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d),_.cancel=function(){void 0!==o&&clearTimeout(o),u=0,r=c=i=o=void 0},_.flush=function(){return void 0===o?l:N(v())},_}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==r}(e))return n;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var a=l.test(e);return a||o.test(e)?c(e.slice(2),a?2:8):s.test(e)?n:+e}e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError(a);return y(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),b(e,t,{leading:r,maxWait:t,trailing:i})}}).call(t,a("DuR2"))},YSmg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("LvfB");var n=a("U7vG"),r=a.n(n),i=a("KSGD"),s=a.n(i),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),l(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar-content-container flexbox flex-column flex-space-between"},r.a.createElement("a",{className:"close",onClick:this.props.onCloseRequest},r.a.createElement("i",{className:"fa fa-arrow-left"})),this.props.children))}}]),t}(),c=o;o.PropTypes={name:s.a.string.isRequired,onCloseRequest:s.a.func},o.defaultProps={onCloseRequest:function(){}};var u=a("cabM"),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),m(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"copyright"},"Data ",(new Date).getFullYear()," ",r.a.createElement("a",{target:"_blank",href:"https://utk.edu"},"UTK")," and ",r.a.createElement("a",{target:"_blank",href:"http://www.uky.edu/UKHome/"},"UKY"))}}]),t}(),d=h;h.PropTypes={name:s.a.string.isRequired};var p=a("h7v/"),f=a("NdNt"),v=a("c8iI"),b=a("0dG/"),y=a.n(b),g=a("saAw"),E=a("PJh5"),w=a.n(E),N=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var _=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={visible:!1,shown:!1},a.storageID="disclaimer_last_show_"+a.props.id,a.shouldShow=a.determineShouldShow(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),N(t,[{key:"determineShouldShow",value:function(){if(!window.localStorage)return!0;var e=window.localStorage.getItem(this.storageID);return!e||!!w()().subtract(7,"days").isAfter(e)&&(window.localStorage.removeItem(this.storageID),!0)}},{key:"close",value:function(){this.setState({visible:!1})}},{key:"dontShowAgain",value:function(){this.close(),window.localStorage&&window.localStorage.setItem(this.storageID,w()())}},{key:"show",value:function(){!this.state.shown&&this.shouldShow&&this.setState({visible:!0,shown:!0})}},{key:"render",value:function(){return r.a.createElement("div",{className:"notification is-info floating-disclaimer"+(this.state.visible?" is-active":""),onClick:function(e){return e.stopPropagation()}},r.a.createElement("button",{className:"delete",type:"button",onClick:this.close.bind(this)}),this.props.children,r.a.createElement("div",{className:"mt-0"},r.a.createElement("button",{className:"button is-info is-inverted is-small",onClick:this.dontShowAgain.bind(this)},"Don't show me this again")))}}]),t}(),k=_;_.PropTypes={id:s.a.number},_.defaultProps={id:0};var S=a("Hwqd"),C=a("OE/d"),T=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var O=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return void 0===a&&(a=[]),n._searchTerm="",n._markers=e,n._categories=a,n._mapBounds=null,n._collectionID=0,n._confirmed=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,S["a"]),T(t,[{key:"replace",value:function(e){return this._markers=e,this._filter()}},{key:"setCategories",value:function(e){this._categories=e}},{key:"search",value:function(e){return this._searchTerm=e.trim().toLowerCase(),this._filter()}},{key:"category",value:function(e){return this._categories=e,this._filter()}},{key:"bounds",value:function(e){return this._mapBounds=e,this._filter()}},{key:"collections",value:function(e){return this._collectionID=parseInt(e),this._filter()}},{key:"confirmed",value:function(e){return this._confirmed=1===parseInt(e),this._filter()}},{key:"newCollection",value:function(e,t){if(C.a.authenticated())for(var a=0;a<this._markers.length;a++)if(e.id===this._markers[a].id)return this._markers[a].collections.push(t),this._markers[a]}},{key:"newFlag",value:function(e,t){if(C.a.authenticated())for(var a=0;a<this._markers.length;a++)if(e.id===this._markers[a].id)return this._markers[a].flags.push(t),this._markers[a]}},{key:"removeCollection",value:function(e,t){if(C.a.authenticated())for(var a=0;a<this._markers.length;a++)if(e.id===this._markers[a].id)return this._markers[a].collections=this._markers[a].collections.filter(function(e){return t!==e.id}),this._markers[a]}},{key:"removeFlag",value:function(e,t){if(C.a.authenticated())for(var a=0;a<this._markers.length;a++)if(e.id===this._markers[a].id)return this._markers[a].flags=this._markers[a].flags.filter(function(e){return parseInt(t)!==e.id}),this._markers[a]}},{key:"resetBounds",value:function(){this._mapBounds=null}},{key:"_search",value:function(e){return 0===this._searchTerm.length||(!!this._contains(e.title,this._searchTerm)||!!this._contains(e.owner,this._searchTerm))}},{key:"_category",value:function(e){return 0!==this._categories.length&&-1!==this._categories.indexOf(e.category)}},{key:"_bounds",value:function(e){if(null===this._mapBounds)return!0;var t={lat:e.position.latitude,lng:e.position.longitude};return this._mapBounds.contains(t)}},{key:"_collection",value:function(e){return this._collectionID<=0||-1!==this._flatten(e.collections).indexOf(this._collectionID)}},{key:"_confirmedOnly",value:function(e){return!1===this._confirmed||e.confirmations_count>0}},{key:"_filter",value:function(){var e=this;return this._markers.filter(function(t){return e._bounds(t)&&e._search(t)&&e._category(t)&&e._collection(t)&&e._confirmedOnly(t)})}}]),t}(),P=a("jVml"),x=a("C6vg"),F=a("F8kA"),j=a("5zKI"),M=a("5L7H"),I=a("iwoP"),R=a("mOuh"),D=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var L=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.defaultMapPosition={center:{lat:40.354388,lng:-95.998237},zoom:5},a.initialLoad=!0,a.state={markers:[],categories:[],selectedCategories:[],selectedConfirmation:0,center:a.defaultMapPosition.center,zoom:a.defaultMapPosition.zoom,selectedMarker:null,galleryImages:[],showSidebar:!1,loading:!1,showFilters:!1,searchTerm:"",collections:[],selectedCollection:0,filters:[],selectedFilter:0,showFiltersModal:!1,total:0,showCollectionsForm:!1,showFlagForm:!1,ownedCollections:[],appliedAdvancedFilter:!1},document.title="Map - TreeSnap",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),D(t,[{key:"componentWillMount",value:function(){this.loadCategories(),this.loadCollections(),this.loadFilters(),this.loadCount(),document.body.className="map-page"}},{key:"componentDidMount",value:function(){this.setState({loading:!0}),this.initSidebar()}},{key:"componentWillUnmount",value:function(){document.body.className=""}},{key:"loadCount",value:function(){var e=this;axios.get("/web/map/count").then(function(t){e.setState({total:t.data.data.count})}).catch(function(e){console.log(e.response)})}},{key:"initSidebar",value:function(){window.outerWidth>797&&(this.setState({showSidebar:!0,showFilters:!0}),this.refs.maps.resize())}},{key:"openSidebar",value:function(){this.setState({showSidebar:!0}),this.refs.maps.resize()}},{key:"closeSidebar",value:function(){this.setState({showSidebar:!1,showCollectionsForm:!1,showFlagForm:!1}),this.refs.maps.resize()}},{key:"loadObservations",value:function(){var e=this,t=this.refs.maps.getBounds();axios.get("/web/map",{params:{bounds:{southWest:t.getSouthWest().toJSON(),northEast:t.getNorthEast().toJSON()}}}).then(function(t){e.initialLoad=!1;var a=t.data.data;C.a.admin()||C.a.scientist()||e.disclaimer.show();var n=void 0;e.filter?(e.filter.resetBounds(),n=e.filter.replace(a)):(e.filter=new O(a,e.state.selectedCategories),n=e.filter._filter()),e.setState({markers:n,loading:!1})}).catch(function(t){e.setState({loading:!1}),console.log(t)})}},{key:"loadCategories",value:function(){var e=this;axios.get("/web/observations/categories").then(function(t){var a=t.data.data;e.setState({categories:a,selectedCategories:a}),e.filter&&e.filter.setCategories(a)}).catch(function(e){console.log(e.response)})}},{key:"loadCollections",value:function(){var e=this;C.a.authenticated()&&(axios.get("/web/collections/1").then(function(t){e.setState({collections:t.data.data})}).catch(function(e){e.response&&401===e.response.status||console.log(e.response)}),axios.get("/web/collections/customizable/1").then(function(t){e.setState({ownedCollections:t.data.data})}).catch(function(e){e.response&&401===e.response.status||console.log(e.response)}))}},{key:"loadFilters",value:function(){var e=this;C.a.authenticated()&&axios.get("/web/filters").then(function(t){var a=t.data.data.map(function(e){return{label:e.name,value:e.id}});e.setState({filters:a})}).catch(function(e){e.response&&401===e.response.status||console.log(e.response)})}},{key:"goToSubmission",value:function(e,t){void 0===t&&(t=15),this.refs.maps.goTo({lat:e.position.latitude,lng:e.position.longitude},t)}},{key:"_renderSubmission",value:function(e){var t=this,a=e.title;return a.length>30&&(a=a.substr(0,30)+"..."),r.a.createElement("a",{href:"javascript:;",role:"button",className:"bar-item",style:{backgroundImage:"url("+e.thumbnail+")"},key:"marker_"+e.id,onClick:function(){t.setState({selectedMarker:e,showFilters:!1}),t.openSidebar(),t.goToSubmission(e,10),null!==e.ref&&e.ref.openCallout()}},r.a.createElement("div",{className:"bar-item-field"},r.a.createElement("strong",{style:{color:"#fff"}},a),r.a.createElement("p",{style:{color:"#eee",fontWeight:"500",fontSize:"14px"}},e.owner),r.a.createElement("p",{style:{color:"#eee",fontWeight:"500",fontSize:"14px"}},e.date)))}},{key:"resetMapPosition",value:function(){this.refs.maps.goTo(this.defaultMapPosition.center,this.defaultMapPosition.zoom)}},{key:"changeCategory",value:function(e){var t=this.state.selectedCategories;-1!==t.indexOf(e)?t=t.filter(function(t){return e!==t}):t.push(e);var a=this.filter.category(t);this.setState({markers:a,selectedCategories:t})}},{key:"changeCollection",value:function(e){var t=this.filter.collections(e);this.setState({markers:t,selectedCollection:e})}},{key:"changeConfirmation",value:function(e){e=parseInt(e);var t=this.filter.confirmed(e);this.setState({markers:t,selectedConfirmation:e})}},{key:"changeFilter",value:function(e){e=parseInt(e),this.setState({selectedFilter:e}),0!==e?this.applyAdvancedFilter(e):(this.loadObservations(),j.a.push("Advanced filters removed."))}},{key:"applyAdvancedFilter",value:function(e){var t=this;this.setState({loading:!0}),axios.get("/web/filter/"+e,{params:{map:1}}).then(function(e){var a=e.data.data,n=a.observations,r=a.filter,i=t.filter.replace(n);t.setState({markers:i,loading:!1,total:n.length}),r&&j.a.push('Filter "'+r.name+'" has been applied.')}).catch(function(e){t.setState({loading:!1}),console.log(e)})}},{key:"filterCreated",value:function(e){var t=e.data;if(t.filter){var a=this.state.filters.concat({label:t.filter.name,value:t.filter.id}),n=t.filter.id;this.setState({filters:a,selectedFilter:n}),j.a.push('Filter "'+t.filter.name+'" has been created and applied.')}else this.setState({selectedFilter:0}),j.a.push("Advanced filters applied.");var r=this.filter.replace(t.observations);this.setState({markers:r,showFiltersModal:!1,appliedAdvancedFilter:!0})}},{key:"search",value:function(e){var t=this.filter.search(e);this.setState({markers:t,searchTerm:e})}},{key:"boundsChanged",value:function(e){if(this.initialLoad||0!==parseInt(this.state.selectedFilter)||this.state.appliedAdvancedFilter){if(this.filter){var t=this.filter.bounds(e);this.setState({markers:t})}}else this.loadObservations()}},{key:"_renderMap",value:function(){var e=this;return r.a.createElement(p.a,{id:"map2",ref:"maps",center:this.state.center,zoom:this.state.zoom,onBoundsChange:this.boundsChanged.bind(this),onLoad:this.loadObservations.bind(this)},this.state.markers.map(function(t){return r.a.createElement(f.a,{key:t.id,position:t.position,title:t.title,ref:function(e){return t.ref=e},owner_id:t.user_id,onClick:function(){e.setState({selectedMarker:t,showFilters:!1,showCollectionsForm:!1,showFlagForm:!1}),window.innerWidth>797&&e.openSidebar()}},r.a.createElement("div",{className:"media callout is-flex flex-v-center"},r.a.createElement("div",{className:"media-left mr-0"},r.a.createElement("img",{src:t.thumbnail,alt:t.title,style:{width:50,height:"auto"}})),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"mb-0"},r.a.createElement("strong",null,t.title)),r.a.createElement("div",{className:"mb-0"},"By ",t.owner),r.a.createElement("a",{href:"/observation/"+t.id},"See full description"))))}))}},{key:"_renderBottomBar",value:function(){var e=this;return r.a.createElement("div",{className:"horizontal-bar",id:"horizontal-bar-container"},r.a.createElement("a",{href:"javascript:;",className:"scroll scroll-left",onClick:this.scrollLeft.bind(this)},r.a.createElement("i",{className:"fa fa-chevron-left"})),r.a.createElement("div",{className:"bar-items-container dragscroll",id:"horizontal-bar",style:{overflowX:0===this.state.markers.length?"hidden":"scroll"},onScroll:this.setScrollState.bind(this)},this.state.markers.slice(0,20).map(function(t,a){return e._renderSubmission(t,a)}),0===this.state.markers.length?r.a.createElement("p",{className:"ml-1 mt-1 has-text-white"},"No results found. Try zooming out or moving the map to cover the locations you are interested in."):null),r.a.createElement("a",{href:"javascript:;",className:"scroll scroll-right",onClick:this.scrollRight.bind(this)},r.a.createElement("i",{className:"fa fa-chevron-right"})))}},{key:"setScrollState",value:function(){var e=document.getElementById("horizontal-bar"),t=document.getElementById("horizontal-bar-container");e.offsetWidth+e.scrollLeft===e.scrollWidth?(t.style.paddingRight="65px",e.scrollLeft+=65):t.style.paddingRight=0}},{key:"scrollRight",value:function(){var e=0,t=void 0;t=setInterval(function(){200===e&&clearInterval(t),e+=5,document.getElementById("horizontal-bar").scrollLeft+=5},5)}},{key:"scrollLeft",value:function(){var e=0,t=void 0;t=setInterval(function(){200===e&&clearInterval(t),e+=5,document.getElementById("horizontal-bar").scrollLeft-=5},5)}},{key:"_renderFilters",value:function(){var e=this;return r.a.createElement("div",{className:"sidebar-filters"},r.a.createElement("p",{className:"mb-0",style:{marginTop:-10}},"Showing ",this.state.markers.length," out of ",this.state.total),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Filters"),r.a.createElement("p",{className:"control has-icon has-icon-right"},r.a.createElement("input",{className:"input",type:"search",placeholder:"Search visible area on map",value:this.state.searchTerm,onChange:function(t){var a=t.target;return e.search(a.value)}}),r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fa fa-search"}))),r.a.createElement("p",{className:"help"},"Search by user name or observation title.")),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Observation Category"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"checkbox-container"},this.state.categories.map(function(t,a){return r.a.createElement("a",{key:a,href:"javascript:;",className:"button is-full checkbox-button"+(-1!==e.state.selectedCategories.indexOf(t)?" is-active":""),onClick:function(){e.changeCategory(t)}},r.a.createElement("span",{className:"icon mr-0"},-1!==e.state.selectedCategories.indexOf(t)?r.a.createElement("i",{className:"fa fa-check"}):r.a.createElement("i",{className:"fa fa-times"})),r.a.createElement("span",null,t," ",-1===e.state.selectedCategories.indexOf(t)?r.a.createElement("small",null,"(removed)"):null))})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Collections"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select is-full-width"},r.a.createElement("select",{value:this.state.selectedCollection,name:"collections",onChange:function(t){var a=t.target;return e.changeCollection(a.value)}},r.a.createElement("option",{value:0},"Select Collection"),this.state.collections.map(function(e){return r.a.createElement("option",{value:parseInt(e.value),key:e.value},e.label)}))),0===this.state.filters.length?r.a.createElement("p",{className:"help is-warning"},"You currently have no saved collections"):null,r.a.createElement("p",{className:"help"},"You can create or add observations to a collection using the",r.a.createElement("span",{className:"ml-0 mr-0 icon is-small"},r.a.createElement("i",{className:"fa fa-star"}))," icon."))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Saved Advanced Filters"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select is-full-width"},r.a.createElement("select",{value:this.state.selectedFilter,onChange:function(t){var a=t.target;return e.changeFilter(a.value)}},r.a.createElement("option",{value:0},"Select Saved Filter"),this.state.filters.map(function(e){return r.a.createElement("option",{value:parseInt(e.value),key:e.value},e.label)}))),0===this.state.filters.length?r.a.createElement("p",{className:"help is-warning"},"You currently have no saved filters"):null,r.a.createElement("p",{className:"help"},"You can save advanced filters by providing a label before applying the filters."))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Confirmed by Scientists"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select is-full-width"},r.a.createElement("select",{value:this.state.selectedConfirmation,onChange:function(t){var a=t.target;return e.changeConfirmation(a.value)}},r.a.createElement("option",{value:0},"Show All"),r.a.createElement("option",{value:1},"Show only confirmed observations"))),r.a.createElement("p",{className:"help"},"Allows you to view only confirmed observations."))),r.a.createElement("p",{className:"mt-1 has-text-centered"},this.state.appliedAdvancedFilter||0!==this.state.selectedFilter?r.a.createElement("a",{href:"javascript:;",className:"button is-danger",onClick:function(){e.setState({appliedAdvancedFilter:!1,loading:!0,selectedFilter:0}),e.loadObservations()}},"Clear Advanced Filters"):r.a.createElement("a",{href:"javascript:;",className:"button is-primary",onClick:function(){return e.setState({showFiltersModal:!0})}},"More Advanced Filters")))}},{key:"_renderSidebar",value:function(){var e=this;return null===this.state.selectedMarker&&!1===this.state.showFilters?r.a.createElement(c,null):r.a.createElement(c,{onCloseRequest:function(){e.state.showCollectionsForm||e.state.showFlagForm?e.setState({showCollectionsForm:!1,showFlagForm:!1}):e.closeSidebar()}},this.getSidebarContent(),this.state.showCollectionsForm||this.state.showFlagForm?r.a.createElement("div",{className:"sidebar-bottom-bar"},r.a.createElement("a",{href:"javascript:;",onClick:function(){e.setState({showCollectionsForm:!1,showFlagForm:!1})}},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fa fa-arrow-left"})),r.a.createElement("span",null,"Return to Observation"))):null)}},{key:"getSidebarContent",value:function(){return this.state.showFilters?this._renderFilters():null!==this.state.selectedMarker?this.state.showCollectionsForm?this._renderCollectionsForm():this.state.showFlagForm?this._renderFlagForm():this._renderObservation():null}},{key:"showCollectionsForm",value:function(){this.setState({showFilters:!1,showFlagForm:!1,showCollectionsForm:!0})}},{key:"showFlagForm",value:function(){this.setState({showFilters:!1,showFlagForm:!0,showCollectionsForm:!1})}},{key:"_renderCollectionsForm",value:function(){var e=this;return r.a.createElement("div",{className:"p-1"},r.a.createElement("h4",{className:"title is-4 mb-1",style:{maxWidth:"225px"}},"Add ",this.state.selectedMarker.title," to a collection"),r.a.createElement(M.a,{observationId:this.state.selectedMarker.id,collections:this.state.ownedCollections,onSubmit:function(t){j.a.push('Observation added to "'+t.label+'" successfully'),e.setState({});for(var a=e.state.collections,n=0;n<a.length;n++)if(a[n].value===t.id)return;a.push({label:t.label,value:t.id}),e.setState({collections:a,ownedCollections:e.state.ownedCollections.concat({label:t.label,value:t.id}),selectedMarker:e.filter.newCollection(e.state.selectedMarker,t)})}}),this.state.selectedMarker.collections.length>0?r.a.createElement("div",{className:"field mt-1"},r.a.createElement("label",{className:"label"},"This observation is in the following collections")):null,this.state.selectedMarker.collections.map(function(t){return r.a.createElement("div",{key:t.id,className:"flexbox flex-space-between flex-v-center mt-1"},r.a.createElement("div",null,t.label),r.a.createElement("div",null,r.a.createElement("button",{className:"button is-small is-outlined is-danger",type:"button",onClick:function(){return e.removeCollection(e.state.selectedMarker,t)}},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fa fa-times"})))))}))}},{key:"removeCollection",value:function(e,t){var a=this;axios.delete("/web/collection/detach",{params:{observation_id:e.id,collection_id:t.id}}).then(function(n){a.setState({selectedMarker:a.filter.removeCollection(e,parseInt(t.id))}),j.a.push("Observation removed from collection successfully")}).catch(function(e){console.log(e)})}},{key:"_renderFlagForm",value:function(){var e=this,t=this.state.selectedMarker.flags.length>0;return r.a.createElement("div",{className:"p-1"},r.a.createElement("h4",{className:"title is-4 mb-1",style:{maxWidth:"225px"}},"Flag ",this.state.selectedMarker.title),r.a.createElement(I.a,{observationId:this.state.selectedMarker.id,collections:this.state.collections,flagged:t,flagId:t?this.state.selectedMarker.flags[0].id:0,onSubmit:function(t){j.a.push("Observation has been flagged"),e.setState({selectedMarker:e.filter.newFlag(e.state.selectedMarker,t)})},onUndo:function(t){j.a.push("Flag removed successfully"),e.setState({selectedMarker:e.filter.removeFlag(e.state.selectedMarker,parseInt(t.id))})}}),t?r.a.createElement("button",{className:"button is-link",style:{float:"right",position:"relative",top:-35},onClick:function(){return e.setState({showFlagForm:!1})}},"Done"):null)}},{key:"_renderObservation",value:function(){var e=this,t=this.state.selectedMarker,a=t.data;return r.a.createElement("div",null,r.a.createElement("div",{className:"sidebar-img",style:{backgroundImage:"url("+t.thumbnail+")"}},r.a.createElement("a",{href:"javascript:;",className:"sidebar-img-overlay flexbox flex-v-center flex-h-center flex-column",onClick:function(){e.setState({galleryImages:t.images,showModal:!0})}},r.a.createElement("i",{className:"fa fa-photo"}),r.a.createElement("div",{className:"has-text-centered"},"Click to Enlarge"))),r.a.createElement("div",{className:"sidebar-icons-container"},r.a.createElement("div",{className:"card-footer"},r.a.createElement("a",{href:"javascript:;",className:"flex-column",onClick:function(){e.setState({galleryImages:t.images,showModal:!0})}},r.a.createElement("i",{className:"fa fa-picture-o"}),r.a.createElement("span",{className:"help"},"Images")),r.a.createElement("a",{href:"javascript:;",className:"flex-column"+(t.collections.length>0?" is-success":""),onClick:this.showCollectionsForm.bind(this)},r.a.createElement("i",{className:"fa fa-star"}),r.a.createElement("span",{className:"help"},"Save")),r.a.createElement("a",{href:"javascript:;",className:"flex-column"+(t.flags.length>0?" is-danger":""),onClick:this.showFlagForm.bind(this)},r.a.createElement("i",{className:"fa fa-flag"}),r.a.createElement("span",{className:"help"},"Flag")))),r.a.createElement("div",{className:"sidebar-content"},r.a.createElement("h3",{className:"title is-4"},t.title),t.custom_id?r.a.createElement("div",{className:"sidebar-item"},r.a.createElement("h5",null,r.a.createElement("strong",null,"Custom Tree Identifier")),r.a.createElement("p",{className:"ml-1"},t.custom_id)):null,r.a.createElement("div",{className:"sidebar-item"},r.a.createElement("h5",null,r.a.createElement("strong",null,"Collection Date")),r.a.createElement("p",{className:"ml-1"},t.date)),Object.keys(a).map(function(n){var r=null;void 0!==a[n+"_units"]&&(r=a[n+"_units"]);var i=void 0!==P.a[n]?P.a[n]:n;return e._renderMetaData(i,a[n],n,t,r)}),r.a.createElement("div",{className:"sidebar-item"},r.a.createElement("h5",null,r.a.createElement("strong",null,"Observation Page")),r.a.createElement("p",{className:"ml-1"},r.a.createElement(F.b,{to:"/observation/"+t.id},"Visit Observation Page")))))}},{key:"_renderMetaData",value:function(e,t,a,n,i){return!0===R.a.isJson(t)&&(t=JSON.parse(t)),r.a.createElement("div",{className:"sidebar-item",key:a},r.a.createElement("h5",null,r.a.createElement("strong",null,e)),r.a.createElement("div",{className:"ml-1"},t," ",i,"comment"===a&&n.has_private_comments?r.a.createElement("p",{className:"help"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fa fa-lock"})),r.a.createElement("span",null,"Only you can see this comment")):null))}},{key:"_renderFilterButton",value:function(){var e=this;return r.a.createElement("a",{href:"javascript:;",className:"button filters-button",onClick:function(){e.setState({selectedMarker:null,showFilters:!e.state.showFilters}),e.state.showFilters?e.closeSidebar():e.openSidebar()}},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fa fa-filter"})),r.a.createElement("span",null,"Filters"))}},{key:"_renderImage",value:function(e){return r.a.createElement("div",{className:"image-gallery-image"+(this.state.galleryImages.length>1?" show-scroll":"")},r.a.createElement("img",{src:e.original,alt:"Plant Image"}))}},{key:"_renderImagesModal",value:function(){var e=this;if(!this.state.showModal)return null;if(0===this.state.galleryImages.length)return r.a.createElement(v.a,{large:!0,onCloseRequest:function(){return e.setState({showModal:!1})}});var t=[];return this.state.galleryImages.map(function(e){t.push({original:e})}),r.a.createElement(v.a,{onCloseRequest:function(){return e.setState({showModal:!1})}},r.a.createElement(y.a,{items:t,showThumbnails:!1,showFullscreenButton:!1,showPlayButton:!1,renderItem:this._renderImage.bind(this)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.state.showSidebar?"sidebar-visible":""},r.a.createElement(u.a,{container:!0}),this._renderSidebar(),r.a.createElement("button",{type:"button",className:"button reset-map-button",onClick:this.resetMapPosition.bind(this)},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fa fa-search"})),r.a.createElement("span",null,"Reset Position")),this._renderMap(),this._renderFilterButton(),this._renderBottomBar(),this._renderImagesModal(),r.a.createElement(k,{ref:function(t){return e.disclaimer=t}},"Notice: For privacy reasons, the location of the trees displayed on this map have been altered. To learn more, visit our ",r.a.createElement("a",{href:"/faq"},"Frequently Asked Questions")," page."),r.a.createElement(d,null),r.a.createElement(g.a,{visible:this.state.loading,containerStyle:{backgroundColor:"rgba(255,255,255,0.8)"}}),r.a.createElement(x.a,{visible:this.state.showFiltersModal,onCloseRequest:function(){return e.setState({showFiltersModal:!1})},onCreate:this.filterCreated.bind(this),map:!0}))}}]),t}();t.default=L},c8iI:function(e,t,a){"use strict";var n=a("U7vG"),r=a.n(n),i=a("KSGD"),s=a.n(i),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),l(t,[{key:"close",value:function(){this.props.permanent||this.props.onCloseRequest()}},{key:"render",value:function(){return r.a.createElement("div",{className:"modal is-active"},this.props.permanent||!this.props.showClose?null:r.a.createElement("button",{className:"close-modal",onClick:this.close.bind(this),style:{zIndex:999999}},r.a.createElement("i",{className:"fa fa-times"})),r.a.createElement("div",{className:"modal-background",onClick:this.close.bind(this)}),this.props.card?this.props.children:r.a.createElement("div",{className:"modal-content image-slider",style:{width:"100%",maxWidth:"700px"}},this.props.children))}}]),t}();t.a=o,o.PropTypes={onCloseRequest:s.a.func.isRequired,permanent:s.a.bool,showClose:s.a.bool,card:s.a.bool},o.defaultProps={permanent:!1,showClose:!0,card:!1}},cabM:function(e,t,a){"use strict";var n=a("U7vG"),r=a.n(n),i=a("KSGD"),s=a.n(i),l=a("IFrJ"),o=a("F8kA"),c=a("OE/d"),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isActive:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),u(t,[{key:"toggle",value:function(){this.setState({isActive:!this.state.isActive})}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar"+(this.props.home?" home-nav":"")},r.a.createElement("div",{className:this.props.container?"container is-fluid":"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(o.c,{to:"/",className:"navbar-item"},r.a.createElement("img",{src:"/logo/ts-logo-"+(this.props.home?"48":"32")+".png",alt:"Logo",className:"logo-img"}),r.a.createElement("span",{className:"logo-text"},r.a.createElement("b",null,"Tree"),r.a.createElement("span",{style:{fontWeight:300}},"Snap"))),r.a.createElement("div",{className:"navbar-burger",onClick:this.toggle.bind(this)},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{className:"navbar-menu"+(this.state.isActive?" is-active":"")},r.a.createElement("div",{className:"navbar-end"},r.a.createElement("a",{href:"https://www.facebook.com/treesnapapp/",className:"navbar-item"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fa fa-facebook"}))),r.a.createElement("a",{href:"https://twitter.com/Treesnapapp",className:"navbar-item"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fa fa-twitter"})))),r.a.createElement("div",{className:"navbar-end"},r.a.createElement(o.c,{exact:!0,to:"/",className:"navbar-item",activeClassName:"is-active"},"Home"),r.a.createElement(o.c,{to:"/map",className:"navbar-item",activeClassName:"is-active"},"Map"),r.a.createElement(o.c,{to:"/partners",className:"navbar-item",activeClassName:"is-active"},"Scientific Partners"),r.a.createElement(o.c,{to:"/about",className:"navbar-item",activeClassName:"is-active"},"About"),c.a.authenticated()?r.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},r.a.createElement(o.c,{to:"/account",className:"navbar-link",activeClassName:"is-active"},"Account"),r.a.createElement("div",{className:"navbar-dropdown"},r.a.createElement(o.c,{to:"/account/observations",className:"navbar-item",activeClassName:"is-active"},"My Observations"),r.a.createElement(o.c,{to:"/account/groups",className:"navbar-item",activeClassName:"is-active"},"Groups"),r.a.createElement(o.c,{to:"/account/collections",className:"navbar-item",activeClassName:"is-active"},"Collections"),r.a.createElement(o.c,{to:"/account/filters",className:"navbar-item",activeClassName:"is-active"},"Filters"),r.a.createElement("hr",{className:"navbar-divider"}),r.a.createElement(o.c,{to:"/account",className:"navbar-item",activeClassName:"is-active"},"Settings"),r.a.createElement("a",{href:"/logout",className:"navbar-item"},"Logout"))):null,c.a.authenticated()?null:r.a.createElement("a",{href:"/login",className:"navbar-item "+l.a.isActive("/login")},"Login"),c.a.authenticated()?null:r.a.createElement("a",{href:"/register",className:"navbar-item "+l.a.isActive("/register")},"Register"),c.a.can("access admin pages")?r.a.createElement("a",{href:"/admin",className:"navbar-item "+l.a.isActive("/admin",!1)},"Admin"):null))))}}]),t}();t.a=m,m.PropTypes={container:s.a.bool,home:s.a.bool},m.defaultProps={container:!1,home:!1}},"h7v/":function(e,t,a){"use strict";var n=a("U7vG"),r=a.n(n),i=a("KSGD"),s=a.n(i),l=a("NdNt"),o=a("t4LX"),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.cluster=null,a.markers=[],a.colors={"American Chestnut":"https://maps.google.com/mapfiles/ms/icons/green-dot.png",Ash:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png",Hemlock:"https://maps.google.com/mapfiles/ms/icons/red-dot.png","White Oak":"https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",Other:"https://maps.google.com/mapfiles/ms/icons/purple-dot.png"},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),u(t,[{key:"componentDidMount",value:function(){var e=this,t={center:{lat:this.props.center.lat,lng:this.props.center.lng},zoom:this.props.zoom,minZoom:4,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_CENTER}};this.maps=new google.maps.Map(this.refs.mapContainer,t),this.setState({center:t.center,zoom:t.zoom}),this.maps.addListener("idle",function(){e.props.onBoundsChange(e.maps.getBounds())}),this.maps.addListener("click",function(){return o.a.emit("mapClicked")}),this.cluster=new MarkerClusterer(this.maps,[],{imagePath:"/images/map/m",maxZoom:7}),google.maps.event.addListenerOnce(this.maps,"idle",this.props.onLoad)}},{key:"resize",value:function(){var e=this;setTimeout(function(){google.maps.event.trigger(e.maps,"resize")},300)}},{key:"goTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.maps.setCenter(e),this.maps.setZoom(t),google.maps.event.trigger(this.maps,"idle")}},{key:"renderChildren",value:function(){var e=this;return this.refs&&this.refs.mapContainer?r.a.Children.map(this.props.children,function(t){return t.type===l.a?r.a.cloneElement(t,{maps:e.maps,onCreate:function(t){e.markers.push(t),e.createCluster()},onDestroy:function(t){e.markers=e.markers.filter(function(e){return t!==e}),e.createCluster(),t.setMap(null)}}):t}):null}},{key:"getBounds",value:function(){return this.maps.getBounds()}},{key:"createCluster",value:function(){if(0===this.props.children.length&&null!==this.cluster&&this.cluster.clearMarkers(),this.props.children.length>0&&this.markers.length===this.props.children.length){if(null!==this.cluster)return this.cluster.clearMarkers(),void this.cluster.addMarkers(this.markers);this.cluster=new MarkerClusterer(this.maps,this.markers,{imagePath:"/images/map/m",maxZoom:7})}}},{key:"render",value:function(){return r.a.createElement("div",c({ref:"mapContainer"},_.omit(this.props,["center","zoom","onBoundsChange","onLoad"])),this.renderChildren())}}]),t}();t.a=m,m.PropTypes={center:s.a.object,zoom:s.a.number,onBoundsChange:s.a.func,onLoad:s.a.func},m.defaultProps={center:{lat:40.354388,lng:-95.998237},zoom:4,onBoundsChange:function(e){},onLoad:function(){}}},iwoP:function(e,t,a){"use strict";var n=a("U7vG"),r=a.n(n),i=a("KSGD"),s=a.n(i),l=a("saAw"),o=a("OE/d"),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={reason:0,comments:"",errors:{reason:[],comments:[]},flagged:!1,flag_id:0,loading:!1},a.reasons=["This tree is the wrong species","This tree is on my private land and I would like it removed","This submission is spam","This submission is inappropriate","Other"],a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),c(t,[{key:"componentWillMount",value:function(){this.setState({flagged:this.props.flagged,flag_id:this.props.flagId})}},{key:"componentWillReceiveProps",value:function(e){e.flagged!==this.state.flagged&&this.setState({flagged:e.flagged})}},{key:"undo",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0}),axios.delete("/web/flag/"+this.state.flag_id).then(function(e){t.setState({loading:!1}),t.props.onUndo(e.data.data)}).catch(function(e){t.setState({loading:!1}),console.log(e)})}},{key:"submit",value:function(e){var t=this;e.preventDefault(),this.validate()&&(this.setState({loading:!0}),axios.post("/web/flag",{observation_id:this.props.observationId,reason:this.state.reason,comments:this.state.comments}).then(function(e){var a=e.data.data;t.setState({loading:!1,reason:0,comments:"",errors:{reason:[],comments:[]},flag_id:a.id}),t.props.onSubmit(a)}).catch(function(e){t.setState({loading:!1});var a=e.response;if(a&&422===a.status){var n=a.data;t.setState({errors:{reason:n.reason||[],comments:n.comments||[]}})}else console.log(e)}))}},{key:"validate",value:function(){var e={reason:[],comments:[]},t=!1;return 0===this.state.reason&&(e.reason=["The reason field is required."],t=!0),"Other"===this.state.reason&&""===this.state.comments.trim()&&(e.comments=["Please specify the other reason."],t=!0),this.setState({errors:e}),!t}},{key:"renderFlagForm",value:function(){var e=this;return r.a.createElement("form",{action:"#",method:"POST",onSubmit:this.submit.bind(this)},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Reason"),r.a.createElement("div",{className:"control"},r.a.createElement("span",{className:"select"+(this.state.errors.reason.length>0?" is-danger":"")},r.a.createElement("select",{value:this.state.reason,onChange:function(t){var a=t.target;return e.setState({reason:a.value})}},r.a.createElement("option",{value:"0",disabled:!0},"[Reason]"),this.reasons.map(function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))),this.state.errors.reason.map(function(e,t){return r.a.createElement("p",{className:"help is-danger",key:t},e)}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Additional Comments"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"card-textarea-sm textarea"+(this.state.errors.comments.length>0?" is-danger":""),value:this.state.comments,onChange:function(t){var a=t.target;return e.setState({comments:a.value})}}),this.state.errors.comments.map(function(e,t){return r.a.createElement("p",{className:"help is-danger",key:t},e)}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-primary"},"Flag Observation"))))}},{key:"renderUndoForm",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"notification is-success"},"Observation has been flagged and administrators will be notified shortly."),r.a.createElement("button",{className:"button",onClick:this.undo.bind(this)},"Undo"))}},{key:"render",value:function(){return o.a.authenticated()?r.a.createElement("div",null,this.state.flagged?this.renderUndoForm():this.renderFlagForm(),r.a.createElement(l.a,{visible:this.state.loading})):r.a.createElement("div",{className:"content"},r.a.createElement("p",null,"You must be logged in to flag this observation."),r.a.createElement("p",null,"Please ",r.a.createElement("a",{href:"/login"},"login")," or ",r.a.createElement("a",{href:"/register"},"create an account")," first."))}}]),t}();t.a=u,u.PropTypes={observationId:s.a.number.isRequired,onSubmit:s.a.func,flagged:s.a.bool,onUndo:s.a.func,flagId:s.a.number},u.defaultProps={flagged:0,flagId:0,onSubmit:function(){},onUndo:function(){}}},jVml:function(e,t,a){"use strict";var n=window.TreeSnap.metaLabels;t.a=n},mOuh:function(e,t,a){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"isJson",value:function(e){try{JSON.parse(e)}catch(e){return!1}return!0}},{key:"unit",value:function(e){return{feet:"US"===window.TreeSnap.units?"Feet":"Meters",inches:"US"===window.TreeSnap.units?"Inches":"cm"}[e.toLowerCase()]||null}},{key:"flattenObject",value:function(e){var t=this;return Object.keys(e).map(function(a){return Array.isArray(e[a])?_.flattenDeep(e[a]):"object"===n(e[a])?t.flattenObject(e[a]):e[a]})}}]),e}();t.a=i},saAw:function(e,t,a){"use strict";var n=a("U7vG"),r=a.n(n),i=a("KSGD"),s=a.n(i),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var o=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),l(t,[{key:"render",value:function(){return this.props.visible?this.props.inline?r.a.createElement("div",{className:"mt-1",style:this.props.containerStyle},r.a.createElement("i",{className:"fa fa-refresh fa-spin fa-2x"})):r.a.createElement("div",{className:"spinner-overlay",style:this.props.containerStyle},r.a.createElement("div",{className:"overlay-blur"}),r.a.createElement("span",{className:"spinner-container"},r.a.createElement("i",{className:"is-loading"}))):null}}]),t}();t.a=o,o.PropTypes={visible:s.a.bool.isRequired,containerStyle:s.a.object,inline:s.a.bool},o.defaultProps={containerStyle:{},inline:!1}},t4LX:function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"emit",value:function(e){var t=void 0;document.createEvent?(t=new Event(e),document.dispatchEvent(t)):(t=document.createEventObject(),document.fireEvent("on"+e,t))}},{key:"listen",value:function(e,t){document.addEventListener(e,t)}},{key:"remove",value:function(e,t){document.removeEventListener(e,t)}}]),e}();t.a=new r},y1vT:function(e,t,a){(function(t){var a="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,h=u||m||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,v=function(){return h.Date.now()};function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==r}(e))return n;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var a=l.test(e);return a||o.test(e)?c(e.slice(2),a?2:8):s.test(e)?n:+e}e.exports=function(e,t,n){var r,i,s,l,o,c,u=0,m=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError(a);function g(t){var a=r,n=i;return r=i=void 0,u=t,l=e.apply(n,a)}function E(e){var a=e-c;return void 0===c||a>=t||a<0||h&&e-u>=s}function w(){var e=v();if(E(e))return N(e);o=setTimeout(w,function(e){var a=t-(e-c);return h?f(a,s-(e-u)):a}(e))}function N(e){return o=void 0,d&&r?g(e):(r=i=void 0,l)}function _(){var e=v(),a=E(e);if(r=arguments,i=this,c=e,a){if(void 0===o)return function(e){return u=e,o=setTimeout(w,t),m?g(e):l}(c);if(h)return o=setTimeout(w,t),g(c)}return void 0===o&&(o=setTimeout(w,t)),l}return t=y(t)||0,b(n)&&(m=!!n.leading,s=(h="maxWait"in n)?p(y(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d),_.cancel=function(){void 0!==o&&clearTimeout(o),u=0,r=c=i=o=void 0},_.flush=function(){return void 0===o?l:N(v())},_}}).call(t,a("DuR2"))}});